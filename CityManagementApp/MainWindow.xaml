<Window x:Class="CityManagementApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:CityManagementApp"
        Title="City Management" Height="550" Width="900"
        WindowStartupLocation="CenterScreen"
        Background="#F0F2F5">

    <Window.DataContext>
        <local:MainWindowViewModel/>
    </Window.DataContext>

    <DockPanel LastChildFill="True">

        <!-- Top bar -->
        <Grid DockPanel.Dock="Top" Background="#2C3E50" Height="50">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBlock Text="City Management System"
                       Foreground="White" FontSize="20" FontWeight="Bold"
                       VerticalAlignment="Center" Margin="10,0,0,0"/>

            <TextBlock Text="{Binding Username}" 
                       Foreground="White" FontSize="14"
                       VerticalAlignment="Center" HorizontalAlignment="Right"
                       Margin="0,0,10,0" Grid.Column="1"/>

            <Button Content="Logout" Grid.Column="2" Margin="0,0,10,0" Padding="5,2"
                    VerticalAlignment="Center"
                    Background="#E74C3C" Foreground="White" FontWeight="Bold"
                    Cursor="Hand" Click="LogoutButton_Click"/>
        </Grid>

        <!-- Tabs -->
        <TabControl FontSize="14" Margin="10" Background="White" BorderBrush="#BDC3C7" BorderThickness="1" 
                    DockPanel.Dock="Top" >
            <!-- Tasks Tab -->
            <TabItem Header="Tasks">
                <DockPanel>
                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Top" Margin="5">
                        <Button Content="Create Task" Command="{Binding CreateTaskCommand}" Margin="5"
                                IsEnabled="{Binding CanCreateTasks}"
                                Background="#3498DB" Foreground="White" FontWeight="Bold" Padding="5,2"
                                Cursor="Hand"/>
                    </StackPanel>

                    <ListBox ItemsSource="{Binding Tasks}" Margin="5">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border BorderBrush="#BDC3C7" BorderThickness="1" CornerRadius="5" Margin="2" Padding="5" Background="#ECF0F1">
                                    <DockPanel>
                                        <StackPanel Orientation="Vertical">
                                            <TextBlock>
                                                <Run FontWeight="Bold" Text="Task Details: " />
                                                <Run Text="{Binding Details}" />
                                            </TextBlock>
                                            <TextBlock>
                                                <Run FontWeight="Bold" Text="Status: " />
                                                <Run Text="{Binding Status, Mode=OneWay}" />
                                            </TextBlock>
                                        </StackPanel>
                                        <Button Content="Accept" DockPanel.Dock="Right" Margin="5,0,0,0"
                                                Command="{Binding DataContext.AcceptTaskCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                CommandParameter="{Binding}"
                                                Visibility="{Binding AcceptButtonVisibility}"
                                                Background="#2ECC71" Foreground="White" FontWeight="Bold"
                                                Padding="5,2" Cursor="Hand"/>
                                    </DockPanel>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </DockPanel>
            </TabItem>

            <!-- Projects Tab -->
            <TabItem Header="Projects">
                <DockPanel>
                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Top" Margin="5">
                        <Button Content="Create Project" Command="{Binding CreateProjectCommand}" Margin="5"
                                IsEnabled="{Binding CanCreateProjects}"
                                Background="#3498DB" Foreground="White" FontWeight="Bold" Padding="5,2"
                                Cursor="Hand"/>
                    </StackPanel>

                    <ListBox ItemsSource="{Binding Projects}" Margin="5">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border BorderBrush="#BDC3C7" BorderThickness="1" CornerRadius="5" Margin="2" Padding="5" Background="#ECF0F1">
                                    <DockPanel>
                                        <TextBlock Text="{Binding Details}" DockPanel.Dock="Left"/>
                                        <TextBlock Text="{Binding Status, Mode=OneWay}" Margin="10,0,0,0" DockPanel.Dock="Left"/>
                                        <Button Content="Accept" DockPanel.Dock="Right" Margin="5,0,0,0"
                                                Command="{Binding DataContext.AcceptProjectCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                CommandParameter="{Binding}"
                                                Visibility="{Binding AcceptButtonVisibility}"
                                                Background="#2ECC71" Foreground="White" FontWeight="Bold"
                                                Padding="5,2" Cursor="Hand"/>
                                    </DockPanel>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </DockPanel>
            </TabItem>
        </TabControl>
    </DockPanel>
</Window>
